<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
<title>GFFI FLYNN</title>

<style>
*{margin:0;padding:0;touch-action:none;font-family:sans-serif}
html,body{overflow:hidden;background:black}
canvas{display:block}

/* MENU */
#menu{
position:fixed;inset:0;
background:#000;color:white;
display:flex;flex-direction:column;
align-items:center;justify-content:center;
z-index:10;
}
.charbox{display:flex;gap:15px}
.card{
width:110px;height:160px;
background:#111;border-radius:15px;
border:2px solid #333;
display:flex;flex-direction:column;
align-items:center;justify-content:center;
}
.card.active{border-color:orange}
.card img{width:90px}
button{
margin-top:20px;
padding:12px 30px;
font-size:18px;
background:orange;border:none;border-radius:20px;
}

/* CONTROL */
#ctrl{
position:fixed;bottom:10px;width:100%;
display:flex;justify-content:space-between;
padding:0 20px;
}
.btn{
width:60px;height:60px;border-radius:50%;
background:rgba(255,255,255,.25);
display:flex;align-items:center;justify-content:center;
font-size:26px;
}
</style>
</head>

<body>

<div id="menu">
<h1>üî• GFFI FLYNN üî•</h1>
<div class="charbox">
<div class="card" onclick="pick('asep',this)">
<img src="https://i.postimg.cc/kGN0dWNX/Proyek-Baru-7-E7C0DB8.png"><small>ASEP</small>
</div>
<div class="card" onclick="pick('farhan',this)">
<img src="https://i.postimg.cc/x8y1FJcL/file-000000008cbc7209ba95716b9ca5099c.png"><small>FARHAN</small>
</div>
<div class="card" onclick="pick('flynn',this)">
<img src="https://i.postimg.cc/J7Tgj7T5/Proyek-Baru-7-769B34B.png"><small>FLYNN</small>
</div>
</div>
<button onclick="start()">START</button>
</div>

<canvas id="c"></canvas>

<div id="ctrl">
<div>
<div class="btn" id="l">‚¨ÖÔ∏è</div>
<div class="btn" id="j">‚¨ÜÔ∏è</div>
</div>
<div>
<div class="btn" id="r">‚û°Ô∏è</div>
<div class="btn" id="s">üî•</div>
</div>
</div>

<script>
const c=document.getElementById("c"),ctx=c.getContext("2d");
c.width=innerWidth;c.height=innerHeight;

/* IMAGES */
const img={
bg1:new Image(),bg2:new Image(),
fire:new Image(),bossfire:new Image(),
asep:new Image(),farhan:new Image(),flynn:new Image(),
ghost:new Image(),boss:new Image()
};
img.bg1.src="https://i.postimg.cc/c1Q7NF3X/e20f2e831c750e780cc75a269add47e9.jpg";
img.bg2.src=img.bg1.src;
img.fire.src="https://i.postimg.cc/8c0NYRTc/a9ce9efff324a78bdf3905a15b227a7b.png";
img.bossfire.src=img.fire.src;
img.asep.src="https://i.postimg.cc/kGN0dWNX/Proyek-Baru-7-E7C0DB8.png";
img.farhan.src="https://i.postimg.cc/x8y1FJcL/file-000000008cbc7209ba95716b9ca5099c.png";
img.flynn.src="https://i.postimg.cc/J7Tgj7T5/Proyek-Baru-7-769B34B.png";
img.ghost.src="https://i.postimg.cc/6Q0zwzgS/Proyek-Baru-6-14E6F4A.png";
img.boss.src="https://i.postimg.cc/LXSXk3sq/Proyek-Baru-8-00EADCE.png";

/* DATA */
let char=null;
let p={x:80,y:0,w:110,h:140,vy:0,hp:10,cd:true};
let bullets=[],ghosts=[],boss=null,bossBullets=[];
let score=0;

const ground=c.height-170,grav=0.7;
const cfg={
asep:{c:1,d:4},
farhan:{c:4,d:1},
flynn:{c:3,d:2}
};

/* PICK */
function pick(n,el){
char=n;
document.querySelectorAll(".card").forEach(c=>c.classList.remove("active"));
el.classList.add("active");
}

/* START */
function start(){
if(!char)return alert("Pilih karakter!");
document.getElementById("menu").style.display="none";
p.y=ground;
spawnGhost();
setInterval(spawnBoss,30000);
loop();
}

/* SHOOT BURST */
function shoot(){
if(!p.cd)return;
let g=cfg[char];
for(let i=0;i<g.c;i++){
setTimeout(()=>{
bullets.push({x:p.x+90,y:p.y+70,d:g.d});
},i*120);
}
p.cd=false;
setTimeout(()=>p.cd=true,1000);
}

/* SPAWN */
function spawnGhost(){
setTimeout(()=>{
ghosts.push({x:c.width,y:ground,hp:3});
spawnGhost();
},2000+Math.random()*2000);
}
function spawnBoss(){
if(!boss) boss={x:c.width-200,y:ground-60,hp:9,cd:0};
}

/* HP BAR */
function bar(x,y,hp,max){
ctx.fillStyle="red";
ctx.fillRect(x,y,50*(hp/max),6);
ctx.strokeStyle="white";
ctx.strokeRect(x,y,50,6);
}

/* LOOP */
let bgx1=0,bgx2=0;
function loop(){
ctx.clearRect(0,0,c.width,c.height);

/* PARALLAX */
bgx1-=0.3;bgx2-=0.8;
ctx.drawImage(img.bg1,bgx1,0,c.width,c.height);
ctx.drawImage(img.bg1,bgx1+c.width,0,c.width,c.height);
ctx.drawImage(img.bg2,bgx2,0,c.width,c.height);
ctx.drawImage(img.bg2,bgx2+c.width,0,c.width,c.height);
if(bgx1<=-c.width)bgx1=0;
if(bgx2<=-c.width)bgx2=0;

/* SCORE */
ctx.fillStyle="white";
ctx.font="20px Arial";
ctx.fillText("SCORE: "+score,20,30);

/* PLAYER */
p.vy+=grav;p.y+=p.vy;
if(p.y>=ground){p.y=ground;p.vy=0}
ctx.drawImage(img[char],p.x,p.y,p.w,p.h);
bar(p.x,p.y-10,p.hp,10);

/* GAME OVER */
if(p.hp<=0){
ctx.fillStyle="rgba(0,0,0,.7)";
ctx.fillRect(0,0,c.width,c.height);
ctx.fillStyle="red";
ctx.font="40px Arial";
ctx.fillText("GAME OVER",c.width/2-120,c.height/2);
return;
}

/* BULLETS */
bullets.forEach((b,i)=>{
b.x+=10;
ctx.drawImage(img.fire,b.x,b.y,35,35);
if(b.x>c.width)bullets.splice(i,1);
});

/* GHOST */
ghosts.forEach((g,i)=>{
g.x-=2;
ctx.drawImage(img.ghost,g.x,g.y,80,100);
bar(g.x,g.y-10,g.hp,3);

/* hit player */
if(g.x<p.x+p.w && g.x+80>p.x){
p.hp-=1;
ghosts.splice(i,1);
}

/* hit bullet */
bullets.forEach((b,bi)=>{
if(b.x<g.x+80 && b.x+35>g.x){
g.hp-=b.d;
bullets.splice(bi,1);
}
});
if(g.hp<=0){
score+=1;
ghosts.splice(i,1);
}
});

/* BOSS */
if(boss){
ctx.drawImage(img.boss,boss.x,boss.y,150,160);
bar(boss.x,boss.y-10,boss.hp,9);

boss.cd++;
if(boss.cd>90){
bossBullets.push({x:boss.x,y:boss.y+80});
boss.cd=0;
}

bossBullets.forEach((bb,bi)=>{
bb.x-=6;
ctx.drawImage(img.bossfire,bb.x,bb.y,35,35);
if(bb.x<p.x+p.w){
p.hp-=1;
bossBullets.splice(bi,1);
}
});

bullets.forEach((b,bi)=>{
if(b.x<boss.x+150 && b.x+35>boss.x){
boss.hp-=b.d;
bullets.splice(bi,1);
}
});
if(boss.hp<=0){
score+=3;
boss=null;
}
}

requestAnimationFrame(loop);
}

/* TOUCH */
const T=(id,f)=>{
let e=document.getElementById(id);
e.addEventListener("touchstart",x=>{x.preventDefault();f(true)});
e.addEventListener("touchend",x=>{x.preventDefault();f(false)});
};
T("l",v=>{if(v)p.x-=5});
T("r",v=>{if(v)p.x+=5});
T("j",v=>{if(v&&p.y>=ground)p.vy=-14});
document.getElementById("s").ontouchstart=e=>{e.preventDefault();shoot()};
</script>

</body>
</html>